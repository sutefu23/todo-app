(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{367:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),r=a(2115);let l="todos",o="todos_version",n=e=>{try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Failed to save tasks to localStorage:",e)}},d=(0,r.memo)(function(e){let{onAddTask:t}=e,[a,l]=(0,r.useState)(""),[o,n]=(0,r.useState)(""),d=e=>{e.preventDefault(),a.trim()&&(t(a.trim(),o||void 0),l(""),n(""))};return(0,s.jsxs)("form",{onSubmit:d,className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"新しいタスクを追加"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"タスク名"}),(0,s.jsx)("input",{type:"text",id:"title",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),d(e))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200",placeholder:"タスクを入力..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"期限（任意）"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"date",id:"dueDate",value:o,onChange:e=>n(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200"}),o&&(0,s.jsx)("button",{type:"button",onClick:()=>n(""),className:"px-3 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-md hover:bg-gray-100 transition-colors",children:"クリア"})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:"タスクを追加"})]})]})}),i=(0,r.memo)(function(e){let{showCompleted:t,onToggleShowCompleted:a}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow duration-200",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer group",children:[(0,s.jsx)("input",{type:"checkbox",checked:t,onChange:e=>a(e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 transition-all duration-200"}),(0,s.jsx)("span",{className:"text-gray-700 group-hover:text-gray-900 transition-colors duration-200",children:"完了済みのタスクを表示"})]})})}),c=(0,r.memo)(function(e){let{task:t,onToggleComplete:a,onEdit:l,onDelete:o}=e,[n,d]=(0,r.useState)(!1),[i,c]=(0,r.useState)(t.title),[u,m]=(0,r.useState)(t.dueDate||""),g=(()=>{if(!t.dueDate)return null;let e=new Date;e.setHours(0,0,0,0);let a=new Date(t.dueDate);return(a.setHours(0,0,0,0),a<e)?"overdue":a.getTime()===e.getTime()?"today":"future"})();return(0,s.jsxs)("div",{className:"p-4 flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-start sm:items-center gap-3 flex-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>a(t.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 mt-1 sm:mt-0 flex-shrink-0"}),n?(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{i.trim()&&(l(t.id,i.trim(),u||void 0),d(!1))},className:"px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:"保存"}),(0,s.jsx)("button",{onClick:()=>{c(t.title),m(t.dueDate||""),d(!1)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:"キャンセル"})]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"".concat(t.completed?"line-through opacity-50":""," break-words"),children:t.title}),t.dueDate&&(0,s.jsxs)("p",{className:"text-sm mt-1 ".concat("overdue"===g?"text-red-500":"today"===g?"text-orange-500":"text-gray-500"),children:["期限: ",new Date(t.dueDate).toLocaleDateString("ja-JP")]})]})})]}),!n&&(0,s.jsxs)("div",{className:"flex gap-2 mt-2 sm:mt-0 ml-8 sm:ml-0",children:[(0,s.jsx)("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors text-sm sm:text-base",children:"編集"}),(0,s.jsx)("button",{onClick:()=>{window.confirm("このタスクを削除してもよろしいですか？")&&o(t.id)},className:"px-3 py-1.5 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors text-sm sm:text-base",children:"削除"})]})]})}),u=(0,r.memo)(function(e){let{tasks:t,onToggleComplete:a,onEdit:r,onDelete:l}=e;return 0===t.length?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center hover:shadow-md transition-shadow duration-200",children:(0,s.jsx)("p",{className:"text-gray-500",children:"タスクがありません。新しいタスクを追加してください。"})}):(0,s.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow duration-200",children:(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:t.map(e=>(0,s.jsx)(c,{task:e,onToggleComplete:a,onEdit:r,onDelete:l},e.id))})})});function m(){let{tasks:e,isLoading:t,showCompleted:a,setShowCompleted:c,addTask:m,editTask:g,deleteTask:x,toggleComplete:h}=(()=>{let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[d,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t((()=>{try{let e=localStorage.getItem(l);if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return[];let a=(e=>{let t=localStorage.getItem(o),a=t?parseInt(t,10):0,s=e;return a<1&&(s=e.map(e=>{var t,a;let s=new Date().toISOString();return{id:e.id||crypto.randomUUID(),title:e.title||e.name||"Untitled Task",completed:null!=(a=null!=(t=e.completed)?t:e.done)&&a,dueDate:e.dueDate||e.deadline||void 0,createdAt:e.createdAt||e.created||s,updatedAt:e.updatedAt||e.updated||s}})),localStorage.setItem(o,"1"),s})(t).filter(e=>"object"==typeof e&&null!==e&&"string"==typeof e.id&&"string"==typeof e.title&&"boolean"==typeof e.completed&&"string"==typeof e.createdAt&&"string"==typeof e.updatedAt&&(void 0===e.dueDate||"string"==typeof e.dueDate));return a.length!==t.length&&n(a),a}catch(e){return console.error("Failed to load tasks from localStorage:",e),[]}})()),i(!1)},[]),(0,r.useEffect)(()=>{d||n(e)},[e,d]);let c=(0,r.useCallback)((e,a)=>{let s=new Date().toISOString(),r={id:crypto.randomUUID(),title:e,completed:!1,dueDate:a,createdAt:s,updatedAt:s};t(e=>[...e,r])},[]),u=(0,r.useCallback)((e,a,s)=>{t(t=>t.map(t=>t.id===e?{...t,title:a,dueDate:s,updatedAt:new Date().toISOString()}:t))},[]),m=(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),g=(0,r.useCallback)(e=>{t(t=>t.map(t=>t.id===e?{...t,completed:!t.completed,updatedAt:new Date().toISOString()}:t))},[]);return{tasks:(0,r.useMemo)(()=>a?e:e.filter(e=>!e.completed),[e,a]),isLoading:d,showCompleted:a,setShowCompleted:s,addTask:c,editTask:u,deleteTask:m,toggleComplete:g}})();return t?(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"読み込み中..."})}):(0,s.jsx)("main",{className:"min-h-screen",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(d,{onAddTask:m}),(0,s.jsx)(i,{showCompleted:a,onToggleShowCompleted:c}),(0,s.jsx)(u,{tasks:e,onToggleComplete:h,onEdit:g,onDelete:x})]})})})}},8750:(e,t,a)=>{Promise.resolve().then(a.bind(a,367))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8750)),_N_E=e.O()}]);